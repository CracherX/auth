# Auth
Тестовое задание для собеседования

## Описание
Данный репозиторий, это исходный код выполненного тестового задания на позицию Junior Backend Developer.

## Установка
### Docker
**1.** Переходим в директорию docker:
```bash
cd docker
```
**2.** Создаем docker-образы и запускаем их:
```bash
docker-compose up --build
```
Данные авторизации БД по умолчанию:  
**username: Cracher**  
**password: 12345**  
**dbname: auth**  
Значения конфигурационного файла и файла с ключом подтягиваются через volume с docker-хоста в их оригинальном месте нахождения.
### Компиляция
Так же приложение можно скомпилировать с помощью
```bash
go build cmd/auth/main.go
```

## Конфигурация приложения
Осуществляется через изменения значений config/config.yaml.  
Смена секретного ключа упрощена, ожидается base64 формат в secrets/secret.txt (путь к файлу настраивается в config)

## Примеры маршрутов
Все маршруты ожидают параметр **X-Forwarder-For** содержащий ip клиента.  
**GET /auth/token/{GUID}** - возвращает связанную пару Access, Refresh токенов.  
**Ответ:**
```json
{
 "accessToken": ..., (jwt)
 "refreshToken": ... (base64)
 }
```
**POST /auth/refresh** - возвращает связанную пару Access, Refresh токенов. Отзывает предыдущую пару.  
**Ответ:**
 ```json
 {
 "accessToken": ..., (jwt)
 "refreshToken": ... (base64)
 }
```